

<div class="row">
    <div *ngIf="accountSelected" class="col-sm-12 ml-4">
        
        <div class="row mt-2">
            <div class="mr-auto">     
                <div class="container">
                    <h3>{{accountNew}}</h3>
                    <!-- <h3>Novo cadastro</h3> -->
                </div>                               
            </div>
            <div class="mr-2">
                <button class="btn btn btn-outline-primary" (click)="BackToAccounts()" >Voltar para Contas</button> 
            </div>
        </div>
        
        
        
        <form [formGroup]="formAccount" (submit)="SendDataFormAccount()">
            <div class="row">
                <div class="col">  
                    <!-- <div class="form-group">
                        <label for="exampleInputEmail1">Cod.Id</label>
                        <input  formControlName="id" class="form-control" [disabled]="idDisabled == 'true'" >
                    </div> -->
                    <div class="form-group">
                        <label for="exampleInputEmail1">Nome Cliente</label>
                        <input type="text" formControlName="clientName" class="form-control" >
                        <div *ngIf="getControl.clientName.touched && getControl.clientName.invalid" class="text-danger">
                            <div *ngIf="getControl.clientName.errors.required">Nome Cliente é requerido.</div>
                            <div *ngIf="getControl.clientName.errors?.minlength">Minimo 4 caracters são requeridos.</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="exampleInputPassword1">CPF/CNPJ</label>
                        <input type="text" formControlName="cpf_Cnpj" class="form-control">
                        <div *ngIf="getControl.cpf_Cnpj.touched && getControl.cpf_Cnpj.invalid" class="text-danger">
                            <div *ngIf="getControl.cpf_Cnpj.errors.required">CPF ou CNPJ é requerido.</div>
                            <div *ngIf="getControl.cpf_Cnpj.errors?.minlength">Minimo 14 caracters são requeridos.</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="exampleInputPassword1">Codigo Banco</label>
                        <input type="text" formControlName="bankCode" class="form-control">
                        <div *ngIf="getControl.bankCode.touched && getControl.bankCode.invalid" class="text-danger">
                            <div *ngIf="getControl.bankCode.errors.required">Código do banco é requerido.</div>
                        </div>
                        
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label for="exampleInputPassword1">Agência</label>
                        <input type="text" formControlName="agencyNumber" class="form-control">
                        <div *ngIf="getControl.agencyNumber.touched && getControl.agencyNumber.invalid" class="text-danger">
                            <div *ngIf="getControl.agencyNumber.errors.required">Número da Agência é requerido.</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="exampleInputPassword1">Conta</label>
                        <input type="text" formControlName="accountNumber" class="form-control">
                        <div *ngIf="getControl.accountNumber.errors && getControl.accountNumber.invalid" class="text-danger">
                            <div *ngIf="getControl.accountNumber.errors.required">Número da conta é requerido.</div>
                        </div>
                    </div>
                    <div class="form-group">
                        <!-- <label for="exampleInputPassword1"></label> -->
                        <mat-label>Data Abertura</mat-label>
                        <input placeholder="Favor entrar com data estilo Norte-Americano" type="text" formControlName="openingDate" class="form-control">
                        <div *ngIf="getControl.openingDate.touched && getControl.openingDate.invalid" class="text-danger">
                            <div *ngIf="getControl.openingDate.errors.required">Data abertura é requerido.</div>
                        </div>
                    </div>
                    <div class="form-check">                        
                        <input type="checkbox"  formControlName="status"    class="form-check-input" id="exampleCheck1">                        
                        <label type="text"  class="form-check-label">Ativo</label>
                    </div>
                </div>
            </div>
            
            <button type="submit" class="btn btn-primary" [disabled]="!formAccount.valid">Salvar</button>
        </form>
    </div>
    
    <div *ngIf="!accountSelected" class="col-sm-12 ml-4">

        <div class="row">
            <div class="mr-auto">
                <div class="mt-4 mb-4">
                    <div class="container">
                        <h3>Contas bancárias</h3>
                    </div>
                </div>
            </div>
            <div class="mt-4">
                <div class="container">
                    <button class="btn btn btn-success" (click)="NewAccount()">Cadastrar </button> 
                </div>
            </div>
        </div>

        <!-- <table class="table table-hover">
            <thead class="thead-dark">
                <tr>
                    <th scope="col">Cod.Id</th>
                    <th scope="col">NomeCliente</th>
                    <th scope="col">CPF/CNPJ</th>
                    <th scope="col">Codigo Banco</th>
                    <th scope="col">Agência</th>
                    <th scope="col">Conta</th>
                    <th scope="col">Data Abertura</th>
                    <th scope="col">Ativo</th>
                    <th scope="col">Opções</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let acc of listContas">
                    <td scope="row">{{acc.id}}</td>               
                    <td>{{acc.clientName}}</td>
                    <td>{{acc.cpf_Cnpj}}</td>
                    <td>{{acc.bankCode}}</td>
                    <td>{{acc.agencyNumber}}</td>
                    <td>{{acc.accountNumber}}</td>
                    <td>{{acc.openingDate}}</td>
                    <td>{{acc.status}}</td>
                    <td>
                        <div class="btn-group" (click)="alert('oi')">
                            <button class="btn btn-sm btn-outline-warning" (click)="SelectAccount(acc)">
                                Editar
                            </button>
                            <button class="btn btn-sm btn-outline-danger" (click)="DeleteAccount(acc.id)">
                                Excluir
                            </button>
                        </div>                        
                    </td>
                </tr>
            </tbody>
        </table> -->

        <mat-form-field>
            <mat-label>Filtro: </mat-label>
            <input matInput (keyup)="applyFilter($event)" placeholder="Ex. Mia" #input>
          </mat-form-field>
          
          <div class="mat-elevation-z8">
            <table mat-table [dataSource]="listData" matSort>
          
              <ng-container matColumnDef="id">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> ID </th>
                <td mat-cell *matCellDef="let row"> {{row.id}} </td>
              </ng-container>
          
              <ng-container matColumnDef="clientName">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> NomeCliente </th>
                <td mat-cell *matCellDef="let row"> {{row.clientName}} </td>
              </ng-container>
          
              <ng-container matColumnDef="cpf_Cnpj">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> CPF/CNPJ </th>
                <td mat-cell *matCellDef="let row"> {{row.cpf_Cnpj}} </td>
              </ng-container>
          
              <ng-container matColumnDef="bankCode">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Código Banco </th>
                <td mat-cell *matCellDef="let row"> {{row.bankCode}}  </td>
              </ng-container>
              
              <ng-container matColumnDef="agencyNumber">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Agência </th>
                <td mat-cell *matCellDef="let row"> {{row.agencyNumber}}  </td>
              </ng-container>

              <ng-container matColumnDef="accountNumber">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Conta </th>
                <td mat-cell *matCellDef="let row"> {{row.accountNumber}}  </td>
              </ng-container>

              <ng-container matColumnDef="openingDate">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Data Abertura </th>
                <td mat-cell *matCellDef="let row"> {{row.openingDate}}  </td>
              </ng-container>

              <ng-container matColumnDef="status">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Ativo </th>
                <td mat-cell *matCellDef="let row"> {{row.status}}  </td>
              </ng-container>

              <!-- <ng-container matColumnDef="opcoes">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> opções </th>
                <td mat-cell *matCellDef="let row">
                    <div class="btn-group">
                        <button class="btn btn-sm btn-outline-warning" (click)="SelectAccount(acc)">
                            Editar
                        </button>
                        <button class="btn btn-sm btn-outline-danger" (click)="DeleteAccount(acc.id)">
                            Excluir
                        </button>
                    </div>                        
                </td>
              </ng-container> -->

              <ng-container matColumnDef="opcoes">
                <mat-header-cell *matHeaderCellDef></mat-header-cell>
                <mat-cell *matCellDef="let group" (click)="$event.stopPropagation()">
                    <div class="btn-group">
                        <button class="btn btn-sm btn-outline-warning" (click)="SelectAccount(group)">
                            Editar
                        </button>
                        <button class="btn btn-sm btn-outline-danger" (click)="DeleteAccount(group.id)">
                            Excluir
                        </button>
                    </div>     
                </mat-cell>
             </ng-container>

          
              <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
          
              <!-- Row shown when there is no matching data. -->
              <tr class="mat-row" *matNoDataRow>
                <td class="mat-cell" colspan="4">No data matching the filter "{{input.value}}"</td>
              </tr>
            </table>
          
            <mat-paginator [pageSizeOptions]="[2, 3, 25, 100]"></mat-paginator>
          </div>
    </div>
</div>